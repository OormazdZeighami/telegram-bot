# 🔧 راهنمای عیب‌یابی جستجوی آهنگ آنلاین

## ✅ بهبودهای اعمال شده

### 🔍 **سیستم جستجوی چندمنبعه:**
1. **Genius.com** - منبع اصلی
2. **Musixmatch.com** - منبع جایگزین اول
3. **AZLyrics.com** - منبع جایگزین دوم
4. **پایگاه داده محلی** - پشتیبان نهایی

### 🛠️ **بهبودهای فنی:**
- **لاگ‌گذاری کامل** برای عیب‌یابی
- **Header های بهتر** برای دسترسی به سایت‌ها
- **Timeout های مناسب** برای جلوگیری از انتظار طولانی
- **Selector های متعدد** برای استخراج محتوا
- **مدیریت خطا** بهتر

## 🧪 تست سیستم

### **مراحل تست:**

#### 1. **تست آهنگ‌های معروف:**
```
/song Imagine John Lennon
/song Yesterday Beatles
/song Bohemian Rhapsody Queen
```

#### 2. **تست آهنگ‌های مدرن:**
```
/song Shape of You Ed Sheeran
/song Perfect Ed Sheeran
/song See You Again Wiz Khalifa
```

#### 3. **تست آهنگ‌های مختلف:**
```
/song Hotel California Eagles
/song Wonderwall Oasis
/song Closer Chainsmokers
```

### **چک کردن لاگ‌ها:**

در ترمینال، این پیام‌ها را دنبال کنید:
```
🔍 Searching for song: "نام آهنگ"
🌐 Search URL: https://genius.com/search?q=...
✅ Got response from Genius.com, status: 200
📋 Found X song links
🎵 Getting lyrics from: نام آهنگ - URL
🎤 Song: نام آهنگ - Artist: نام هنرمند
📝 Raw lyrics length: X
📋 Processed X lyrics lines
```

## 🔧 عیب‌یابی مشکلات

### **مشکل 1: "آهنگ یافت نشد"**

#### **علل احتمالی:**
- نام آهنگ نادرست
- هنرمند نادرست
- آهنگ در سایت‌ها موجود نیست
- مشکل اتصال اینترنت

#### **راه‌حل:**
1. نام آهنگ را دقیق‌تر وارد کنید
2. نام هنرمند را اضافه کنید
3. از آهنگ‌های معروف استفاده کنید

#### **مثال‌های بهتر:**
```
❌ /song imagine
✅ /song Imagine John Lennon

❌ /song yesterday
✅ /song Yesterday Beatles

❌ /song bohemian
✅ /song Bohemian Rhapsody Queen
```

### **مشکل 2: "خطا در جستجو"**

#### **علل احتمالی:**
- مشکل اتصال اینترنت
- سایت‌ها در دسترس نیستند
- محدودیت‌های دسترسی

#### **راه‌حل:**
1. اتصال اینترنت را بررسی کنید
2. چند دقیقه صبر کنید و دوباره تلاش کنید
3. از آهنگ‌های محلی استفاده کنید

### **مشکل 3: "متن آهنگ خالی"**

#### **علل احتمالی:**
- سایت متن آهنگ را نمایش نمی‌دهد
- Selector های HTML تغییر کرده
- آهنگ فقط در بخش پولی موجود است

#### **راه‌حل:**
1. آهنگ دیگری امتحان کنید
2. از آهنگ‌های محلی استفاده کنید
3. چند دقیقه صبر کنید

## 📊 منابع جستجو

### **1. Genius.com (منبع اصلی):**
- **مزایا:** متن‌های باکیفیت، ترجمه‌های متعدد
- **محدودیت‌ها:** ممکن است محدودیت دسترسی داشته باشد
- **Selector ها:** `[data-lyrics-container="true"]`, `.lyrics`

### **2. Musixmatch.com (جایگزین اول):**
- **مزایا:** پایگاه داده بزرگ، دسترسی آسان
- **محدودیت‌ها:** ممکن است متن کامل نداشته باشد
- **Selector ها:** `.mxm-lyrics__content`

### **3. AZLyrics.com (جایگزین دوم):**
- **مزایا:** متن‌های کامل، بدون محدودیت
- **محدودیت‌ها:** ممکن است آهنگ‌های جدید نداشته باشد
- **Selector ها:** `.ringtone` + nextUntil

## 🎯 بهترین روش‌های استفاده

### **برای بهترین نتایج:**

#### **1. نام‌گذاری دقیق:**
```
✅ /song Imagine John Lennon
✅ /song Bohemian Rhapsody Queen
✅ /song Shape of You Ed Sheeran
```

#### **2. آهنگ‌های معروف:**
- آهنگ‌های کلاسیک
- آهنگ‌های پاپ معروف
- آهنگ‌های راک مشهور

#### **3. صبر و حوصله:**
- جستجو ممکن است 10-30 ثانیه طول بکشد
- ترجمه نیز زمان می‌برد
- صبر کنید تا کامل شود

## 🚀 تست کامل سیستم

### **مراحل تست جامع:**

#### **مرحله 1: تست آهنگ‌های محلی**
```
/song Imagine
/song Yesterday
/song Bohemian Rhapsody
```

#### **مرحله 2: تست آهنگ‌های آنلاین**
```
/song Shape of You Ed Sheeran
/song Perfect Ed Sheeran
/song Despacito Luis Fonsi
```

#### **مرحله 3: تست آهنگ‌های مختلف**
```
/song Hotel California Eagles
/song Wonderwall Oasis
/song Closer Chainsmokers
```

#### **مرحله 4: تست آهنگ‌های جدید**
```
/song [نام آهنگ جدید]
/song [نام هنرمند جدید]
```

## 💡 نکات مهم

### **برای کاربران:**
- نام آهنگ را دقیق وارد کنید
- نام هنرمند را نیز اضافه کنید
- از آهنگ‌های معروف استفاده کنید
- صبر کنید تا جستجو کامل شود

### **برای توسعه‌دهندگان:**
- لاگ‌ها را بررسی کنید
- Selector ها را به‌روزرسانی کنید
- منابع جدید اضافه کنید
- Error handling بهبود دهید

## 🎊 نتیجه

سیستم جستجوی آهنگ بهبود یافته شامل:
- ✅ **چندین منبع جستجو**
- ✅ **لاگ‌گذاری کامل**
- ✅ **مدیریت خطای بهتر**
- ✅ **Timeout های مناسب**
- ✅ **Selector های متعدد**
- ✅ **سیستم پشتیبان‌گیری**

**حالا سیستم جستجوی آهنگ باید بهتر کار کند!** 🎵✨

**برای تست، آهنگ‌های معروف را امتحان کنید و لاگ‌ها را بررسی کنید.** 🔍📊
