# 🚨 راهنمای کامل سیستم اخطار ربات

## 📋 دستورات موجود

### 🔧 دستورات تنظیمات
- `/testadmin` - بررسی وضعیت ادمین بودن
- `/setadmin [شناسه‌ها]` - تنظیم شناسه‌های ادمین (موقت)
- `/clearcache` - پاک کردن کش ادمین‌ها
- `/warnhelp` - راهنمای کامل سیستم اخطار

### ⚠️ دستورات اخطار (نیاز به ادمین بودن)
- `/warn` - اخطار دادن با ریپلای روی پیام
- `/warnuser @username` - اخطار دادن با نام کاربری
- `/unwarn` - حذف یک اخطار با ریپلای
- `/warnings` - مشاهده تاریخچه اخطارها با ریپلای
- `/banuser` - بن کردن کاربر با 3+ اخطار

### 🧪 دستورات تست (بدون نیاز به ادمین بودن)
- `/testwarn` - اخطار تست با ریپلای
- `/testwarnings` - مشاهده اخطارهای خود

## 🚀 نحوه راه‌اندازی

### روش 1: استفاده از ادمین‌های تلگرام (پیشنهادی)
1. ربات را به گروه اضافه کنید
2. ربات را ادمین گروه کنید
3. ادمین‌های گروه می‌توانند از دستورات اخطار استفاده کنند

### روش 2: تنظیم شناسه‌های دستی
1. `/testadmin` را اجرا کنید تا شناسه کاربری خود را ببینید
2. `/setadmin [شناسه‌تان]` را اجرا کنید
3. حالا می‌توانید از دستورات اخطار استفاده کنید

### روش 3: فایل .env (دائمی)
1. فایل `.env` ایجاد کنید
2. محتوای زیر را اضافه کنید:
```
ADMIN_IDS=123456789,987654321
```
3. ربات را مجدداً راه‌اندازی کنید

## 📝 نحوه استفاده

### اخطار دادن
```
/warn
```
- روی پیام کاربر مورد نظر ریپلای کنید
- سپس دستور `/warn` را ارسال کنید

### اخطار با نام کاربری
```
/warnuser @username
```

### مشاهده اخطارها
```
/warnings
```
- روی پیام کاربر مورد نظر ریپلای کنید
- سپس دستور `/warnings` را ارسال کنید

### بن کردن
```
/banuser
```
- فقط برای کاربرانی که 3+ اخطار دارند
- روی پیام کاربر ریپلای کنید

## 🎯 ویژگی‌های سیستم

### ✅ مزایا
- کش ادمین‌ها برای سرعت بیشتر
- ذخیره خودکار اخطارها در فایل
- پشتیبان‌گیری خودکار
- مدیریت خطاهای گروه ارتقا یافته
- دستورات تست برای بررسی عملکرد

### 📊 سیستم امتیازدهی
- هر کاربر حداکثر 3 اخطار
- نمایش تعداد اخطارها
- هشدار در 3 اخطار
- امکان بن دستی در 3+ اخطار

### 🔒 امنیت
- بررسی ادمین بودن قبل از هر عملیات
- کش امن برای جلوگیری از درخواست‌های تکراری
- مدیریت خطاهای API

## 🛠️ عیب‌یابی

### مشکل: "شما ادمین نیستید"
**راه حل:**
1. `/testadmin` را اجرا کنید
2. اگر ادمین تلگرام هستید، مشکل حل می‌شود
3. اگر نیستید، از `/setadmin` استفاده کنید

### مشکل: "خطا در بررسی وضعیت ادمین"
**راه حل:**
1. اطمینان حاصل کنید ربات ادمین گروه است
2. `/clearcache` را اجرا کنید
3. دوباره تلاش کنید

### مشکل: "کاربر پیدا نشد"
**راه حل:**
1. مطمئن شوید نام کاربری درست است
2. از شناسه عددی استفاده کنید
3. کاربر باید در گروه باشد

## 📁 فایل‌های مرتبط
- `warnings.json` - ذخیره اخطارها
- `warnings.json.corrupt.*` - پشتیبان‌های خراب
- `.env` - تنظیمات ادمین‌ها (اختیاری)

## 🔄 به‌روزرسانی‌های جدید
- اضافه شدن دستورات تست
- بهبود مدیریت خطاها
- کش هوشمند ادمین‌ها
- دستور تنظیم موقت ادمین‌ها
- پشتیبانی از ادمین‌های تلگرام
